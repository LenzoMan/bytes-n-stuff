# Project Structure

This document describes the structure of the Bytes & Stuff blog project and guidelines for maintaining it.

## Directory Layout

```text
my-blogsite/
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ posts/              âœï¸  ADD NEW POSTS HERE ONLY
â”‚   â”‚   â”œâ”€â”€ AI-blueberry-muffin.md
â”‚   â”‚   â”œâ”€â”€ midnight-adventure.md
â”‚   â”‚   â”œâ”€â”€ my-first-post.md
â”‚   â”‚   â””â”€â”€ ... (other post files)
â”‚   â””â”€â”€ ... (other content directories)
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ CNAME               ğŸ”’ Custom domain (lenmahlangu.online)
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ ... (other static files)
â”œâ”€â”€ themes/
â”‚   â””â”€â”€ PaperMod/           ğŸ”’ READ-ONLY - Don't modify
â”œâ”€â”€ layouts/                âš ï¸  Custom templates (modify carefully)
â”œâ”€â”€ archetypes/
â”‚   â””â”€â”€ default.md          ğŸ“‹ Post template for hugo new
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ css/
â”‚   â””â”€â”€ ... (stylesheets)
â”œâ”€â”€ hugo.yaml               ğŸ”’ Site configuration (modify carefully)
â”œâ”€â”€ deploy.sh               ğŸ”’ Deployment script (don't modify)
â”œâ”€â”€ README.md               ğŸ“– Main documentation
â”œâ”€â”€ CONTRIBUTING.md         ğŸ“– Contribution guidelines
â”œâ”€â”€ PROJECT_STRUCTURE.md    ğŸ“– This file
â”œâ”€â”€ .editorconfig           ğŸ”§ Editor configuration
â”œâ”€â”€ .gitignore              ğŸ”§ Git ignore rules
â”œâ”€â”€ .git/                   ğŸ”’ Git repository (don't touch)
â”œâ”€â”€ .vscode/
â”‚   â””â”€â”€ settings.json       ğŸ”§ VS Code configuration
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ pre-deploy-check.sh ğŸ”§ Pre-deployment validation
â”œâ”€â”€ public/                 âš ï¸  GENERATED - Never edit or commit
â”œâ”€â”€ resources/              âš ï¸  GENERATED - Never edit
â””â”€â”€ .hugo_build.lock        âš ï¸  GENERATED - Never commit
```

## Key Guidelines

### âœï¸ SAFE TO EDIT: `content/posts/`

- Add new posts by running: `hugo new posts/my-post-title.md`
- Edit post front matter: `title`, `date`, `description`, `tags`, `categories`, `draft`
- Never move, rename, or delete post files directly (use `git mv` if needed)
- Always set `draft: true` while writing
- Set `draft: false` when ready to publish

**Example front matter:**

```yaml
---
title: "My Post Title"
date: 2025-11-25T10:00:00Z
description: "Brief description"
draft: true
tags: ["technology", "blog"]
categories: ["tech"]
---
```

### ğŸ”§ CONFIGURATION: Project setup files

These files control project behavior and should be modified thoughtfully:

- `.editorconfig` - Editor formatting rules
- `.gitignore` - Git ignore patterns
- `.vscode/settings.json` - VS Code workspace settings
- `archetypes/default.md` - Template for new posts
- `hugo.yaml` - Hugo site configuration (âš ï¸ very important)

### ğŸ”’ READ-ONLY: Protected files

- `themes/PaperMod/` - Theme (managed by Git submodule)
- `deploy.sh` - Deployment script (tested and working)
- `.git/` - Git internals
- `public/` - Generated by `hugo` command
- `resources/` - Generated by `hugo` command

**If you accidentally modify these:**

```bash
# Restore changed files
git checkout -- path/to/file

# Or restore entire theme
git submodule update --init --recursive
```

### âš ï¸ GENERATED: Never commit these

These are created by Hugo build and should never be committed to Git:

- `public/` - Built site output
- `resources/` - Hugo resource cache
- `.hugo_build.lock` - Build lock file

Your `.gitignore` already excludes these.

## Workflow: Adding a New Post

1. **Create the post file:**

   ```bash
   hugo new posts/my-new-post.md
   ```

2. **Edit the post** in your editor:

   - Update front matter (title, tags, categories, description)
   - Write your content in Markdown
   - Keep `draft: true` until ready

3. **Test locally:**

   ```bash
   hugo serve
   # Visit http://localhost:1313
   ```

4. **When ready to publish:**

   - Set `draft: false` in front matter
   - Run: `scripts/pre-deploy-check.sh` (optional but recommended)
   - Run: `./deploy.sh`
   - Wait 1-2 minutes for GitHub Pages to rebuild

## Workflow: Modifying Site Configuration

Before modifying `hugo.yaml` or theme files:

1. **Understand the change** - Read the documentation
2. **Test locally** - Run `hugo serve` and verify
3. **Commit with clear message:**

   ```bash
   git commit -m "config: update [description]"
   ```

## Safety Checks

### Before deploying, verify

- [ ] `static/CNAME` contains `lenmahlangu.online`
- [ ] Hugo builds without errors: `hugo`
- [ ] `public/` directory exists and isn't empty
- [ ] All posts have proper front matter
- [ ] No unintended drafts are being published

### Pre-deployment script

```bash
./scripts/pre-deploy-check.sh
```

This script automatically validates the above.

## Emergency Recovery

### If you accidentally delete a post

```bash
git checkout -- content/posts/deleted-post.md
```

### If you accidentally modified theme files

```bash
git submodule update --init --recursive
git checkout -- themes/PaperMod/
```

### If the site broke after changes

```bash
git log --oneline  # Find last good commit
git revert <commit-hash>  # Safely undo changes
```

## Questions or Issues?

See `README.md` and `CONTRIBUTING.md` for more information.
